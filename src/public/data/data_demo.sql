-- KIEM TRA DATABASE CO TON TAI 
-- CREATE SCHEMA `cosmeticproject` ; TAO DATABASE
-- SHOW DATABASES LIKE '%cosmetic%'; 
-- SHOW DATABASES LIKE '%cosmetic%';
-- CHON DATABASE VA SU DUNG NEU T0N TAI 
-- SELECT SCHEMA_NAME 
-- FROM INFORMATION_SCHEMA.SCHEMATA
-- WHERE SCHEMA_NAME = 'cosmeticproject';

DROP DATABASE IF EXISTS dbcosmetic;
CREATE DATABASE dbcosmetic;
USE dbcosmetic;

-- TAO BANG
CREATE TABLE IF NOT EXISTS PRODUCT(
	PRODUCT_ID varchar(5) NOT NULL,
	PRODUCT_NAME varchar(70) DEFAULT NULL,
	PRODUCT_PRICE int unsigned DEFAULT NULL,
	PRODUCT_CATEGORY varchar(20) DEFAULT NULL,
	PRODUCT_BRAND varchar(4) DEFAULT NULL,
	PRODUCT_DESCRIPTION varchar(90) DEFAULT NULL,
	NUMBER_OF int unsigned DEFAULT NULL,
    
    -- KHOA CHINH 
	CONSTRAINT PK_PRODUCT
	PRIMARY KEY(PRODUCT_ID)
);

CREATE TABLE IF NOT EXISTS PRODUCT_IMAGE(
	IMAGE_ID varchar(5) NOT NULL,
	PRODUCT_ID varchar(5) DEFAULT NULL,
	PRODUCT_IMAGE varchar(20) DEFAULT NULL,
    
	CONSTRAINT PK_PRODUCT_IMAGE
	PRIMARY KEY(IMAGE_ID)
);

CREATE TABLE IF NOT EXISTS USERS(
	USER_ID varchar(5) NOT NULL,
	USER_EMAIL varchar(50) DEFAULT NULL,
	USER_PHONE varchar(20) DEFAULT NULL,
    USER_PASSWORD varchar(20) DEFAULT NULL,
    
	CONSTRAINT PK_USERS
	PRIMARY KEY(USER_ID)
);

CREATE TABLE IF NOT EXISTS ADDRESS(
	ADDRESS_ID varchar(5) NOT NULL,
	USER_ID varchar(50) DEFAULT NULL,
	UNIT_NUMBER varchar(20) DEFAULT NULL,
    STREET_NUMBER varchar(20) DEFAULT NULL,
    DICTRICT varchar(20) DEFAULT NULL,
    CITY varchar(20) DEFAULT NULL,
    DEPARTMENT varchar(20) DEFAULT NULL,
    COUNTRY varchar(20) DEFAULT NULL,
    ADRESS_LINE varchar(50) DEFAULT NULL,
    
	CONSTRAINT PK_ADDRESS
	PRIMARY KEY(ADDRESS_ID)
);

-- THIET LAP KHOA PHU
ALTER TABLE PRODUCT_IMAGE
ADD
	CONSTRAINT FK_PRODUCT_IMAGE_PRODUCT
	FOREIGN KEY(PRODUCT_ID)
	REFERENCES PRODUCT(PRODUCT_ID);
    

ALTER TABLE ADDRESS
ADD
	CONSTRAINT FK_ADDRESS_USERS
	FOREIGN KEY(USER_ID)
	REFERENCES USERS(USER_ID);
    